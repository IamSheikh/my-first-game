System.register("chunks:///_virtual/GameManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,o,s,l,u,c,h,p,f,_,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.createClass,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,l=t.Prefab,u=t.CCInteger,c=t.Node,h=t.RichText,p=t.Vec3,f=t.instantiate,_=t.Component},function(t){y=t.PlayerController}],execute:function(){var d,N,S,b,T,g,G,I,v,C,P,m,E;o._RF.push({},"65c44jx8HJLgaMWpPkFNNZz","GameManger",void 0);var B,M,L=s.ccclass,k=s.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(B||(B={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameManager",(d=L("GameManager"),N=k({type:l}),S=k({type:u}),b=k({type:y}),T=k({type:c}),g=k({type:h}),d((v=e((I=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,i(e,"cubePrfb",v,a(e)),i(e,"roadLength",C,a(e)),e._road=[],e._curState=M.GS_INIT,i(e,"playerCtrl",P,a(e)),i(e,"startMenu",m,a(e)),i(e,"score",E,a(e)),e}r(e,t);var o=e.prototype;return o.start=function(){var t;this.curState=M.GS_INIT,null==(t=this.playerCtrl)||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},o.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(p.ZERO)),this.playerCtrl.reset()},o.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(B.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===B.BT_NONE?this._road.push(B.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},o.spawnBlockByType=function(t){if(!this.cubePrfb)return null;var e=null;switch(t){case B.BT_STONE:e=f(this.cubePrfb)}return e},o.onStartButtonClicked=function(){this.curState=M.GS_PLAYING},o.checkResult=function(t){t<=this.roadLength?this._road[t]===B.BT_NONE&&(this.curState=M.GS_INIT):this.curState=M.GS_INIT},o.onPlayerJumpEnd=function(t){this.score.string=String(t),this.checkResult(t)},n(e,[{key:"curState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.score&&(this.score.string="0"),setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case M.GS_END:}this._curState=t}}]),e}(_)).prototype,"cubePrfb",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(I.prototype,"roadLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),P=e(I.prototype,"playerCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(I.prototype,"startMenu",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(I.prototype,"score",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManger.ts","./PlayerController.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,s,r,u,p,c,h,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,u=t.Animation,p=t.input,c=t.Input,h=t.Vec3,a=t.Component}],execute:function(){var _,m,l,d,y;s._RF.push({},"785a9HThiVLQYkz9UjaOWx9","PlayerController",void 0);var P=r.ccclass,f=r.property;t("PlayerController",(_=P("PlayerController"),m=f({type:u}),_((y=e((d=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this)._startJump=!1,e._jumpStep=0,e._curJumpTime=0,e._jumpTime=0,e._curJumpSpeed=0,e._curPos=new h,e._deltaPos=new h(0,0,0),e._targetPos=new h,e._isMoving=!1,e._curMoveIndex=0,n(e,"BodyAnim",y,o(e)),e}i(e,t);var s=e.prototype;return s.start=function(){},s.setInputActive=function(t){t?p.on(c.EventType.MOUSE_UP,this.onMouseUp,this):p.off(c.EventType.MOUSE_UP,this.onMouseUp,this)},s.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},s.jumpByStep=function(t){this._isMoving||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),h.add(this._targetPos,this._curPos,new h(this._jumpStep,0,0)),this._isMoving=!0,this.BodyAnim&&(1===t?this.BodyAnim.play("oneStep"):2===t&&this.BodyAnim.play("twoStep")),this._curMoveIndex+=t)},s.onOnceJumpEnd=function(){this._isMoving=!1,this.node.emit("JumpEnd",this._curMoveIndex)},s.update=function(t){this._startJump&&(this._curJumpSpeed+=t,this._curJumpSpeed>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,h.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},s.reset=function(){this._curMoveIndex=0},e}(a)).prototype,"BodyAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=d))||l));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});